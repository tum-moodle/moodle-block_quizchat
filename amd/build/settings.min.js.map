{"version":3,"file":"settings.min.js","sources":["../src/settings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript library for the block_quizchat plugin.\n *\n * @package\n * @copyright 2023, TUM ProLehre | Medien und Didaktik <moodle@tum.de>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {call as fetchMany} from 'core/ajax';\nimport * as Notification from 'core/notification';\nimport * as Str from 'core/str';\nimport Ajax from 'core/ajax';\nimport {\n    checkCharsLength as checkMsgLength,\n    resetCharsCount as updateCharsCount,\n    handleWhiteSpaceMsg as checkWhiteSpaceMsg\n} from 'block_quizchat/chars_limit';\nimport $ from 'jquery';\nimport * as ModalEvents from 'core/modal_events';\nlet isInitialised = false;\nlet msglen;\nlet titlelen;\nlet templatesMap = {};\nlet currentSort = {\n    column: 1,   // default: Title\n    asc: true\n};\n\n// Runs ONCE per page load\nexport const init = () => {\n    if (isInitialised) {\n        return;\n    }\n    isInitialised = true;\n    waitForElement('#quizchat-temp-msgs', () => {\n            onFormOpen();\n        });\n    $(document).on(ModalEvents.shown, () => {\n        waitForElement('#quizchat-temp-msgs', () => {\n            onFormOpen();\n        });\n    });\n};\n// Utility function to wait for an element to exist in the DOM\nconst waitForElement = (selector, callback) => {\n    const element = document.querySelector(selector);\n    if (element) {\n        callback();\n    } else {\n        const observer = new MutationObserver(() => {\n            const element = document.querySelector(selector);\n            if (element) {\n                observer.disconnect();\n                callback();\n            }\n        });\n        observer.observe(document.body, { childList: true, subtree: true });\n    }\n};\n//Runs EVERY time the edit form modal opens\nconst onFormOpen = () => {\n    initQuiztempmsgsDiv ();\n    const tabs = document.querySelectorAll(\".tab-link\");\n    const contents = document.querySelectorAll(\".tab-content\");\n    const saveCentral   = document.getElementById('quizchat-save-central');\n    if (tabs.length) {\n        tabs.forEach(tab => {\n          if (!tab.dataset.bound) {\n              tab.dataset.bound = \"1\";\n              tab.addEventListener(\"click\", () => {\n                // Remove active classes\n                tabs.forEach(t => t.classList.remove(\"active\"));\n                contents.forEach(c => c.classList.remove(\"active\"));\n                // Add active class to clicked tab\n                tab.classList.add(\"active\");\n                // Activate target content\n                const target = document.getElementById(tab.dataset.target);\n                if (tab.dataset.target) {\n                    target.classList.add(\"active\");\n                    if(tab.dataset.target === \"quiztempmsgs\") {\n                        refreshTable();\n                        resetForm();\n                        const link   = document.getElementById('quizchat-createlink');\n                        const form   = document.getElementById('quizchat-form');\n                        form.style.display = 'none';\n                        link.style.display = 'inline';\n                    } else if(tab.dataset.target === \"centraltempmsgs\") {\n                        refreshTable();\n                    }\n                }\n              });\n            }\n        });\n        if (!saveCentral.dataset.bound) {\n            saveCentral.dataset.bound = \"1\";\n            saveCentral.addEventListener('click', function(e) {\n                e.preventDefault();\n                saveBtn_CentralTempMsg();\n            });\n        }\n        initTableHeadersLinks();\n    } else {\n        initTableHeadersLinks();\n    }\n};\nconst resetForm = () => {\n    const title  = document.getElementById('quizchat-title');\n    const msg    = document.getElementById('quizchat-message');\n    const checkbox = document.getElementById('quizchat-ckbx_enabletemp');\n    if (title) {title.value = '';}\n    if (msg) {msg.value = '';}\n    if (checkbox) {checkbox.checked = true;}\n    updateCharsCount(msglen, '#charCount_msg');\n    updateCharsCount(titlelen,'#charCount_title');\n};\nconst sortTableByColumn = (tbody, columnIndex, asc = true) => {\n    const rows = Array.from(tbody.querySelectorAll(\"tr\"))\n        .filter(tr => tr.children.length > columnIndex); // SAFETY\n    const direction = asc ? 1 : -1;\n    rows.sort((a, b) => {\n        const cellA = a.children[columnIndex];\n        const cellB = b.children[columnIndex];\n        if (!cellA || !cellB) {return 0;}\n        let A = cellA.textContent.trim();\n        let B = cellB.textContent.trim();\n        // Date comparison\n        const dA = Date.parse(A);\n        const dB = Date.parse(B);\n        if (!isNaN(dA) && !isNaN(dB)) {\n            return (dA - dB) * direction;\n        }\n        // Number comparison\n        const nA = parseFloat(A);\n        const nB = parseFloat(B);\n        if (!isNaN(nA) && !isNaN(nB)) {\n            return (nA - nB) * direction;\n        }\n        // String comparison\n        return A.localeCompare(B, undefined, {\n            numeric: true,\n            sensitivity: \"base\"\n        }) * direction;\n    });\n    rows.forEach(row => tbody.appendChild(row));\n};\n// Rebuild table from returned rows\nconst rebuildTable = (rows) => {\n    // Check if the \"centraltempmsgs\" div exists\n    const centralDiv = document.getElementById(\"centraltempmsgs\");\n    let tableBody, emptyMsg, activeDiv;\n    if (!centralDiv) {\n        tableBody = document.querySelector('#quizchat-temp-msgs .generaltable tbody');\n        emptyMsg  = document.getElementById('empty_temp');\n    } else {\n        // Select the div that has both classes \"tab-content\" and \"active\"\n        activeDiv = document.querySelector(\".tab-content.active\");\n        let tableselector = '#'+ activeDiv.id + ' .generaltable tbody';\n        tableBody = document.querySelector(tableselector);\n        let emptytempid =  (activeDiv.id === \"centraltempmsgs\")?'empty_temp_central':'empty_temp';\n        emptyMsg  = document.getElementById(emptytempid);\n    }\n\n    if (!tableBody) { return; }\n    tableBody.innerHTML = ''; // clear existing\n    if (!rows || rows.length === 0) {\n        // Hide table, show empty message\n        tableBody.parentElement.style.display = 'none';\n        emptyMsg.style.display = 'block';\n    } else {\n        rows.forEach(row => {\n            // row = [title, message, enabled, fullname, modified, actions]\n            const tr = document.createElement('tr');\n            tr.innerHTML = `\n                <td class=\"text-center\">${row[0]}</td>\n                <td>${row[1]}</td>\n                <td>${row[2]}</td>\n                <td class=\"text-center\">${row[3]}</td>\n                <td class=\"text-center\">${row[4]}</td>\n                <td class=\"text-center\">${row[5]}</td>\n            `;\n            tableBody.appendChild(tr);\n            if (!centralDiv || (activeDiv.id !== \"centraltempmsgs\")) {\n                // attach event directly to the edit link within this row\n                const editBtn = tr.querySelector('.edit_btn');\n                if (editBtn) {\n                    editBtn.addEventListener('click', (e) => {\n                        e.preventDefault();\n                        const id = editBtn.dataset.id;\n                        editTemplate(id);\n                    });\n                }\n                // attach event directly to the delete link within this row\n                const deleteBtn = tr.querySelector('.delete_btn');\n                if (deleteBtn) {\n                    deleteBtn.addEventListener('click', (e) => {\n                        e.preventDefault();\n                        const id = deleteBtn.dataset.id;\n                        deleteTemplate(parseInt(id));\n                    });\n                }\n            } else {\n                if(activeDiv.id === \"centraltempmsgs\") {\n                    // attach event directly to the enable_cent_temp_chkbx checkbox within this row\n                    const enblChkbx = tr.querySelector('.enable_cent_temp_chkbx');\n                    if (enblChkbx) {\n                        enblChkbx.addEventListener('change', (e) => {\n                            e.preventDefault();\n                            const id = enblChkbx.dataset.id;\n                            checkedChanged(parseInt(id));\n                        });\n                    }\n                }\n            }\n        });\n        emptyMsg.style.display = 'none';\n        tableBody.parentElement.style.display = 'block';\n        initTableHeadersLinks();\n    }\n};\nconst initTableHeadersLinks = () => {\n    const tempdiv= document.querySelector('#quizchat-temp-msgs');\n    if (!tempdiv) {return;}\n    const centralDiv = document.getElementById(\"centraltempmsgs\");\n    let tableBody, activeDiv, table;\n    if (!centralDiv) {\n        tableBody = document.querySelector('#quizchat-temp-msgs .generaltable tbody');\n    } else {\n        // Select the div that has both classes \"tab-content\" and \"active\"\n        activeDiv = document.querySelector(\".tab-content.active\");\n        let tableselector = '#'+ activeDiv.id + ' .generaltable tbody';\n        tableBody = document.querySelector(tableselector);\n    }\n    if (!centralDiv) {\n        table = document.querySelector('#quizchat-temp-msgs .generaltable');\n    } else {\n        // Select the div that has both classes \"tab-content\" and \"active\"\n        activeDiv = document.querySelector(\".tab-content.active\");\n        let tableselector = '#'+ activeDiv.id + ' .generaltable';\n        table = document.querySelector(tableselector);\n    }\n    table.querySelector('thead')\n            .querySelectorAll('.sort-asc, .sort-desc')\n            .forEach(th => th.classList.remove('sort-asc', 'sort-desc'));\n    const headers = table.querySelectorAll('.generaltable th');\n    headers.forEach((th, index) => {\n        if (index === 0) {return;} // Action column disabled\n        th.classList.add('sortable');\n        if (!th.dataset.bound) {\n            th.dataset.bound = \"1\";\n            th.addEventListener('click', () => {\n                // Toggle if same column, otherwise reset to ASC\n                if (currentSort.column === index) {\n                    currentSort.asc = !currentSort.asc;\n                } else {\n                    currentSort.column = index;\n                    currentSort.asc = true;\n                }\n                // Update arrows\n                table.querySelector('thead')\n                    .querySelectorAll('.sort-asc, .sort-desc')\n                    .forEach(th => th.classList.remove('sort-asc', 'sort-desc'));\n                th.classList.add(currentSort.asc ? 'sort-asc' : 'sort-desc');\n                // Sort\n                sortTableByColumn(tableBody, index, currentSort.asc);\n            });\n        }\n        const defaultHeader = headers[1];\n        currentSort = {\n            column: 1,   // default: Title\n            asc: true\n        };\n        defaultHeader.classList.add('sort-asc'); // show arrow\n        sortTableByColumn(tableBody, currentSort.column, currentSort.asc);   // sort ascending\n    });\n};\nconst checkedChanged = (id) =>{\n    // Find the checkbox by data-id\n    const checkbox = document.querySelector(`.enable_cent_temp_chkbx[data-id='${id}']`);\n    if (!checkbox) {return;}\n    // Update the map\n    templatesMap[id] = checkbox.checked ? 1 : 0;\n};\nconst notify = async (show_notify = false) => {\n    const msgstr = await Str.getString('template_saved', 'block_quizchat');\n    const qc_input = document.getElementById('id_block_quizchat_quizchatid');\n    let quizchatid = null;\n\n    if (qc_input) {\n        quizchatid = parseInt(qc_input.value);\n    } else {\n        let temp_msgs_div = document.getElementsByName('quizchat-temp-msgs-edit-form')[0];\n        if (temp_msgs_div) {\n            quizchatid = temp_msgs_div.dataset.qcid;\n        }\n    }\n    if(quizchatid === null) {\n        // Trigger Moodle notification (this creates #user-notifications dynamically)\n        Notification.addNotification({\n            message: msgstr,\n            type: 'success'\n        });\n    } else {\n        const notice = document.getElementById('template-save-notice');\n        if (!notice || !show_notify) {return;}\n        notice.style.display = 'block';\n        notice.style.opacity = '1';\n        setTimeout(() => {\n            notice.style.transition = 'opacity 0.5s';\n            notice.style.opacity = '0';\n            setTimeout(() => {\n                notice.style.display = 'none';\n                notice.style.transition = '';\n            }, 500);\n        }, 2000); // visible for 2 seconds\n    }\n};\n\n// Fetch latest rows from service\nconst refreshTable = (shownotify=false) => {\n    const qc_input = document.getElementById('id_block_quizchat_quizchatid');\n    let quizchatid = null;\n\n    if (qc_input) {\n        quizchatid = parseInt(qc_input.value);\n    } else {\n        let temp_msgs_div = document.getElementsByName('quizchat-temp-msgs-edit-form')[0];\n        if (temp_msgs_div) {\n            quizchatid = temp_msgs_div.dataset.qcid;\n        }\n    }\n\n    // Check if the \"centraltempmsgs\" div exists\n    const centralDiv = document.getElementById(\"centraltempmsgs\");\n    let centraltempflag, onlyenabled;\n    let activeDiv;\n    if (!centralDiv) {\n        centraltempflag = false;\n        onlyenabled = null;\n    } else {\n        // Select the div that has both classes \"tab-content\" and \"active\"\n        activeDiv = document.querySelector(\".tab-content.active\");\n        if(activeDiv) {\n            if(activeDiv.id === 'centraltempmsgs') {\n                //quizchatid = 0;\n                centraltempflag = true;\n                onlyenabled = false;\n            } else {\n                centraltempflag = false;\n                onlyenabled = null;\n            }\n        }\n    }\n    const calls = [\n        {\n            methodname: 'block_quizchat_get_template_messages',\n            args: {\n                'templateid': null,\n                'onlyenabled': onlyenabled,\n                'quizchatid' : (quizchatid >0 ? quizchatid : null),\n                'partial_name': '',\n                'centraltempflag': centraltempflag\n            }\n        }\n    ];\n    fetchMany(calls)[0]\n    .then((rows) => {\n        rebuildTable(rows);\n        notify(shownotify);\n    })\n    .catch();\n};\n\nconst saveForm = async () => {\n    const title  = document.getElementById('quizchat-title');\n    const msg    = document.getElementById('quizchat-message');\n    const checkbox = document.getElementById('quizchat-ckbx_enabletemp');\n    const link   = document.getElementById('quizchat-createlink');\n    const form   = document.getElementById('quizchat-form');\n    const qc_input = document.getElementById('id_block_quizchat_quizchatid');\n    let quizchatid = null;\n\n    if (qc_input) {\n        quizchatid = parseInt(qc_input.value);\n    } else {\n        let temp_msgs_div = document.getElementsByName('quizchat-temp-msgs-edit-form')[0];\n        if (temp_msgs_div) {\n            quizchatid = temp_msgs_div.dataset.qcid;\n        }\n    }\n    let requiredmsg = '';\n    if (checkWhiteSpaceMsg('#quizchat-title') && checkWhiteSpaceMsg('#quizchat-message')) {\n        requiredmsg = await Str.getString('txtinput_required', 'block_quizchat');\n        title.setCustomValidity(requiredmsg);\n        msg.setCustomValidity(requiredmsg);\n        title.reportValidity();\n        msg.reportValidity();\n        return;\n    } else if (checkWhiteSpaceMsg('#quizchat-title')) {\n        requiredmsg = await Str.getString('txtinput_required', 'block_quizchat');\n        title.setCustomValidity(requiredmsg);\n        title.reportValidity();\n        return;\n    } else if (checkWhiteSpaceMsg('#quizchat-message')) {\n        if(requiredmsg === '') {\n            requiredmsg = await Str.getString('txtinput_required', 'block_quizchat');\n        }\n        msg.setCustomValidity(requiredmsg);\n        msg.reportValidity();\n        return;\n    }\n    const calls = [\n        {\n            methodname: 'block_quizchat_create_template_message',\n            args: {\n                'title': title.value,\n                'template': msg.value,\n                'isenabled': checkbox.checked,\n                'isquizlevel': (quizchatid >0 ? true : false),\n                'templateid' : null,\n                'quizchatid' : quizchatid\n            }\n        }\n    ];\n    fetchMany(calls)[0]\n    .then( (data) => {\n        resetForm();\n        form.style.display = 'none';\n        link.style.display = 'inline';\n        refreshTable(true);\n        return data.id;\n    })\n    .catch(() => {\n        link.style.display = 'none';\n        form.style.display = 'block';\n    });\n};\n\nconst saveBtn_CentralTempMsg = () => {\n    let templates = [];\n    const qc_input = document.getElementById('id_block_quizchat_quizchatid');\n    let quizchatid = null;\n\n    if (qc_input) {\n        quizchatid = parseInt(qc_input.value);\n    } else {\n        let temp_msgs_div = document.getElementsByName('quizchat-temp-msgs-edit-form')[0];\n        if (temp_msgs_div) {\n            quizchatid = temp_msgs_div.dataset.qcid;\n        }\n    }\n\n    for (let id in templatesMap) {\n        templates.push({\n            templateid: parseInt(id),\n            enabled: templatesMap[id],\n            quizchatid: quizchatid\n        });\n    }\n    const calls = [{\n        methodname: 'block_quizchat_exclude_central_template_messages',\n        args: {\n            'templates': templates\n        }\n    }];\n\n    fetchMany(calls)[0]\n    .then(() => {\n        refreshTable(true);\n    })\n    .catch(Notification.exception);\n    //alert('save central temps clicked!');\n};\n\n const unnotify = () => {\n    const targetContainer = document.querySelector('#region-main');\n    const notif = targetContainer.querySelector('#user-notifications');\n    if (targetContainer && notif) {\n        const closeButton = notif.querySelector('.btn-close');\n        if (closeButton) {\n            closeButton.click(); // simulate user click to close the notification\n        }\n    }\n };\n const editTemplate = (id) => {\n    unnotify();\n    const title  = document.getElementById('quizchat-title');\n    const msg    = document.getElementById('quizchat-message');\n    const checkbox = document.getElementById('quizchat-ckbx_enabletemp');\n    const link   = document.getElementById('quizchat-createlink');\n    const form   = document.getElementById('quizchat-form');\n    const updateBtn   = document.getElementById('quizchat-update');\n    const save   = document.getElementById('quizchat-save');\n    const qc_input = document.getElementById('id_block_quizchat_quizchatid');\n    let quizchatid = null;\n\n    if (qc_input) {\n        quizchatid = parseInt(qc_input.value);\n    } else {\n        let temp_msgs_div = document.getElementsByName('quizchat-temp-msgs-edit-form')[0];\n        if (temp_msgs_div) {\n            quizchatid = temp_msgs_div.dataset.qcid;\n        }\n    }\n    const calls = [{\n        methodname: 'block_quizchat_get_template_messages',\n        args: { templateid: id, onlyenabled: false , quizchatid: (quizchatid >0 ? quizchatid : null), partial_name: '',\n             centraltempflag: false}\n    }];\n\n    fetchMany(calls)[0]\n        .then((data) => {\n            // Fill form with data\n            title.value = data[0][1].replace(/<[^>]*>/g, '').trim(); // title\n            msg.value = data[0][2].replace(/<[^>]*>/g, '').trim(); // template\n            checkbox.checked = data[0][7]; // isenabled flag\n\n            // Show form in edit mode\n            updateBtn.dataset.id = id;\n            save.style.display = 'none';\n            updateBtn.style.display = 'inline-block';\n            form.style.display = 'block';\n            link.style.display = 'none';\n            $('#quizchat-message').trigger('input');\n            $('#quizchat-title').trigger('input');\n        })\n        .catch(Notification.exception);\n};\n\n// Function to update the template via WS\nconst updateTemplate = async (id) => {\n    const title  = document.getElementById('quizchat-title');\n    const msg    = document.getElementById('quizchat-message');\n    const checkbox = document.getElementById('quizchat-ckbx_enabletemp');\n    const link   = document.getElementById('quizchat-createlink');\n    const form   = document.getElementById('quizchat-form');\n    const qc_input = document.getElementById('id_block_quizchat_quizchatid');\n    let quizchatid = null;\n\n    if (qc_input) {\n        quizchatid = parseInt(qc_input.value);\n    } else {\n        let temp_msgs_div = document.getElementsByName('quizchat-temp-msgs-edit-form')[0];\n        if (temp_msgs_div) {\n            quizchatid = temp_msgs_div.dataset.qcid;\n        }\n    }\n    let requiredmsg = '';\n    if (checkWhiteSpaceMsg('#quizchat-title') && checkWhiteSpaceMsg('#quizchat-message')) {\n        requiredmsg = await Str.getString('txtinput_required', 'block_quizchat');\n        title.setCustomValidity(requiredmsg);\n        msg.setCustomValidity(requiredmsg);\n        title.reportValidity();\n        msg.reportValidity();\n        return;\n    } else if (checkWhiteSpaceMsg('#quizchat-title')) {\n        requiredmsg = await Str.getString('txtinput_required', 'block_quizchat');\n        title.setCustomValidity(requiredmsg);\n        title.reportValidity();\n        return;\n    } else if (checkWhiteSpaceMsg('#quizchat-message')) {\n        if(requiredmsg === '') {\n            requiredmsg = await Str.getString('txtinput_required', 'block_quizchat');\n        }\n        msg.setCustomValidity(requiredmsg);\n        msg.reportValidity();\n        return;\n    }\n    const calls = [{\n        methodname: 'block_quizchat_create_template_message',\n        args: {\n            'title': title.value,\n            'template': msg.value,\n            'isenabled': checkbox.checked,\n            'isquizlevel': (quizchatid >0 ? true : false),\n            'templateid' : parseInt(id),\n            'quizchatid' : quizchatid\n        }\n    }];\n\n    fetchMany(calls)[0]\n        .then(() => {\n            refreshTable(true);\n            resetForm();\n            form.style.display = 'none';\n            link.style.display = 'inline';\n        })\n        .catch(Notification.exception);\n};\n\n// Delete template\nconst deleteTemplate = (tempid) => {\n    unnotify();\n    const link   = document.getElementById('quizchat-createlink');\n    const form   = document.getElementById('quizchat-form');\n    Str.get_strings([\n        {key: 'confirm', component: 'moodle'},\n        {key: 'areyousure', component: 'moodle'},\n        {key: 'delete', component: 'moodle'},\n        {key: 'cancel', component: 'moodle'}\n    ]).done(function(strings) {\n        Notification.confirm(\n            strings[0], // Confirm.\n            strings[1], // Are you sure?\n            strings[2], // Delete.\n            strings[3], // Cancel.\n            function() {\n                var promise = Ajax.call([{\n                    methodname: 'block_quizchat_delete_template_message',\n                    args: {\n                        templateid: parseInt(tempid)\n                    }\n                }]);\n                promise[0].then(function() {\n                    refreshTable(true);\n                    resetForm();\n                    form.style.display = 'none';\n                    link.style.display = 'inline';\n                    return;\n                }).fail(Notification.exception);\n            }\n        );\n    }).fail(Notification.exception);\n};\n\nconst txt_oninput = (oninput_event) => {\n    // Prevent default first\n    oninput_event.preventDefault();\n    checkMsgLength(msglen , '#quizchat-message', '#charCount_msg');\n    oninput_event.target.setCustomValidity('');\n};\n\nconst txt_onblur = (onblur_event) => {\n    // Prevent default first\n    onblur_event.preventDefault();\n    //if white space message\n    if (checkWhiteSpaceMsg('#quizchat-message'))\n    {\n        updateCharsCount(msglen, '#charCount_msg');\n    }\n    onblur_event.target.setCustomValidity('');\n};\n\nconst title_oninput = (oninput_event) => {\n    // Prevent default first\n    oninput_event.preventDefault();\n    checkMsgLength(titlelen , '#quizchat-title', '#charCount_title');\n    oninput_event.target.setCustomValidity('');\n};\n\nconst title_onblur = (onblur_event) => {\n    // Prevent default first\n    onblur_event.preventDefault();\n    //if white space message\n    if (checkWhiteSpaceMsg('#quizchat-title'))\n    {\n        updateCharsCount(titlelen, '#charCount_title');\n    }\n    onblur_event.target.setCustomValidity('');\n};\n\nconst initQuiztempmsgsDiv = () => {\n    const link   = document.getElementById('quizchat-createlink');\n    const form   = document.getElementById('quizchat-form');\n    const cancel = document.getElementById('quizchat-cancel');\n    const save   = document.getElementById('quizchat-save');\n    const tableBody = document.querySelector('#quizchat-temp-msgs .generaltable tbody');\n    const updateBtn   = document.getElementById('quizchat-update');\n    const msg = document.getElementById('quizchat-message');\n    const title = document.getElementById('quizchat-title');\n    if (link && form) {\n        msglen = msg.dataset.msglen;\n        titlelen = title.dataset.titlelen;\n        if (!link.dataset.bound) {\n            link.dataset.bound = \"1\";\n            link.addEventListener('click', function(e) {\n                e.preventDefault();\n                // remove existing notification inside region-main div, if any\n                unnotify();\n                link.style.display = 'none';\n                updateBtn.style.display = 'none';\n                save.style.display = 'inline-block';\n                form.style.display = 'block';\n            });\n        }\n        if (!cancel.dataset.bound) {\n            cancel.dataset.bound = \"1\";\n            cancel.addEventListener('click', function(e) {\n                e.preventDefault();\n                resetForm(); // clear textboxes\n                form.style.display = 'none';\n                link.style.display = 'inline';\n            });\n        }\n        if (!save.dataset.bound) {\n            save.dataset.bound = \"1\";\n            save.addEventListener('click', function(e) {\n                e.preventDefault();\n                saveForm();\n            });\n        }\n        if (!updateBtn.dataset.bound) {\n            updateBtn.dataset.bound = \"1\";\n            updateBtn.addEventListener('click', function(e) {\n                e.preventDefault();\n                updateTemplate(updateBtn.dataset.id);\n            });\n        }\n         // Attach click event to all edit buttons after rows are added\n        const editButtons = tableBody.querySelectorAll('.edit_btn');\n        editButtons.forEach(btn => {\n            if (!btn.dataset.bound) {\n                btn.dataset.bound = \"1\";\n                btn.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const id = btn.dataset.id; // get data-id from link\n                    editTemplate(id);\n                });\n            }\n        });\n        // Attach click event to all delete buttons after rows are added\n        const deleteButtons = tableBody.querySelectorAll('.delete_btn');\n        deleteButtons.forEach(btn => {\n            if (!btn.dataset.bound) {\n                btn.dataset.bound = \"1\";\n                btn.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const tempid = btn.dataset.id; // get data-id from link\n                    deleteTemplate(tempid);\n                });\n            }\n        });\n        $('#quizchat-title')\n            .off('input.titleHandler blur.titleHandler')\n            .on('input.titleHandler', title_oninput)\n            .on('blur.titleHandler', title_onblur);\n        $('#quizchat-message')\n            .off('input.msgHandler blur.msgHandler')\n            .on('input.msgHandler', txt_oninput)\n            .on('blur.msgHandler', txt_onblur);\n    }\n};\n\nconst observer = new MutationObserver(() => {\n    const form = document.getElementById('quizchat-form');\n    if (form) {\n        // Stop observing once form appears\n        observer.disconnect();\n        init();\n    }\n});\nobserver.observe(document.body, { childList: true, subtree: true });"],"names":["msglen","titlelen","isInitialised","templatesMap","currentSort","column","asc","init","waitForElement","onFormOpen","document","on","ModalEvents","shown","selector","callback","querySelector","observer","MutationObserver","disconnect","observe","body","childList","subtree","initQuiztempmsgsDiv","tabs","querySelectorAll","contents","saveCentral","getElementById","length","forEach","tab","dataset","bound","addEventListener","t","classList","remove","c","add","target","refreshTable","resetForm","link","style","display","e","preventDefault","saveBtn_CentralTempMsg","initTableHeadersLinks","title","msg","checkbox","value","checked","sortTableByColumn","tbody","columnIndex","rows","Array","from","filter","tr","children","direction","sort","a","b","cellA","cellB","A","textContent","trim","B","dA","Date","parse","dB","isNaN","nA","parseFloat","nB","localeCompare","undefined","numeric","sensitivity","row","appendChild","rebuildTable","centralDiv","tableBody","emptyMsg","activeDiv","tableselector","id","emptytempid","innerHTML","createElement","enblChkbx","checkedChanged","parseInt","editBtn","editTemplate","deleteBtn","deleteTemplate","parentElement","table","th","headers","index","defaultHeader","notify","async","show_notify","msgstr","Str","getString","qc_input","quizchatid","temp_msgs_div","getElementsByName","qcid","Notification","addNotification","message","type","notice","opacity","setTimeout","transition","shownotify","centraltempflag","onlyenabled","calls","methodname","args","then","catch","templates","push","templateid","enabled","exception","unnotify","targetContainer","notif","closeButton","click","form","updateBtn","save","partial_name","data","replace","trigger","tempid","get_strings","key","component","done","strings","confirm","Ajax","call","fail","txt_oninput","oninput_event","setCustomValidity","txt_onblur","onblur_event","title_oninput","title_onblur","cancel","requiredmsg","reportValidity","saveForm","updateTemplate","btn","off"],"mappings":"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"}